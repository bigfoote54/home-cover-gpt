"use strict";(()=>{var e={};e.id=356,e.ids=[356],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4193:e=>{e.exports=require("pdf-parse")},6705:e=>{e.exports=import("formidable")},7147:e=>{e.exports=require("fs")},678:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.r(r),a.d(r,{config:()=>u,default:()=>p,routeModule:()=>d});var i=a(1802),s=a(7153),n=a(6249),o=a(3575),l=e([o]);o=(l.then?(await l)():l)[0];let p=(0,n.l)(o,"default"),u=(0,n.l)(o,"config"),d=new i.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/parse",pathname:"/api/parse",bundlePath:"",filename:""},userland:o});t()}catch(e){t(e)}})},3575:(e,r,a)=>{a.a(e,async(e,t)=>{try{a.r(r),a.d(r,{config:()=>u,default:()=>handler});var i=a(6705),s=a(7147),n=a.n(s),o=a(4193),l=a.n(o),p=e([i]);i=(p.then?(await p)():p)[0];let u={api:{bodyParser:!1}};async function handler(e,r){try{let{fields:a,files:t}=await new Promise((r,a)=>{let t=(0,i.default)({multiples:!1,keepExtensions:!0});t.parse(e,(e,t,i)=>{if(e)return a(e);r({fields:t,files:i})})}),s=Array.isArray(t.file)?t.file[0]:t.file;if(!s)return r.status(400).json({error:"No file uploaded."});let o=await n().promises.readFile(s.filepath),{text:p}=await l()(o);try{await n().promises.unlink(s.filepath)}catch(e){console.warn("Failed to cleanup temporary file:",e)}return r.status(200).json({text:p})}catch(e){return console.error("❌ parse.ts error:",e),r.status(500).json({error:"Failed to parse PDF."})}}t()}catch(e){t(e)}})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[222],()=>__webpack_exec__(678));module.exports=a})();