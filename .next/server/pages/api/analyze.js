"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze";
exports.ids = ["pages/api/analyze"];
exports.modules = {

/***/ "(api)/./lib/openai.ts":
/*!***********************!*\
  !*** ./lib/openai.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callOpenAI: () => (/* binding */ callOpenAI)\n/* harmony export */ });\n// lib/openai.ts\nasync function callOpenAI(prompt) {\n    const apiKey = process.env.OPENAI_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"Missing OPENAI_API_KEY in environment\");\n    }\n    const res = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n            model: \"gpt-4o\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are a helpful assistant.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ]\n        })\n    });\n    if (!res.ok) {\n        const err = await res.json();\n        console.error(\"❌ OpenAI API error:\", err);\n        throw new Error(\"OpenAI request failed\");\n    }\n    const { choices } = await res.json();\n    return choices[0]?.message?.content?.trim() || \"\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvb3BlbmFpLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxnQkFBZ0I7QUFDVCxlQUFlQSxXQUFXQyxNQUFjO0lBQzNDLE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztJQUN6QyxJQUFJLENBQUNILFFBQVE7UUFDWCxNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFFQSxNQUFNQyxNQUFNLE1BQU1DLE1BQU0sOENBQThDO1FBQ3BFQyxRQUFRO1FBQ1JDLFNBQVM7WUFDUCxnQkFBZ0I7WUFDaEJDLGVBQWUsQ0FBQyxPQUFPLEVBQUVULE9BQU8sQ0FBQztRQUNuQztRQUNBVSxNQUFNQyxLQUFLQyxTQUFTLENBQUM7WUFDbkJDLE9BQU87WUFDUEMsVUFBVTtnQkFDUjtvQkFBRUMsTUFBTTtvQkFBVUMsU0FBUztnQkFBK0I7Z0JBQzFEO29CQUFFRCxNQUFNO29CQUFRQyxTQUFTakI7Z0JBQU87YUFDakM7UUFDSDtJQUNGO0lBRUEsSUFBSSxDQUFDTSxJQUFJWSxFQUFFLEVBQUU7UUFDWCxNQUFNQyxNQUFNLE1BQU1iLElBQUljLElBQUk7UUFDMUJDLFFBQVFDLEtBQUssQ0FBQyx1QkFBdUJIO1FBQ3JDLE1BQU0sSUFBSWQsTUFBTTtJQUNsQjtJQUVBLE1BQU0sRUFBRWtCLE9BQU8sRUFBRSxHQUFHLE1BQU1qQixJQUFJYyxJQUFJO0lBQ2xDLE9BQU9HLE9BQU8sQ0FBQyxFQUFFLEVBQUVDLFNBQVNQLFNBQVNRLFVBQVU7QUFDakQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWNvdmVyLy4vbGliL29wZW5haS50cz8wMGQ4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9vcGVuYWkudHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxsT3BlbkFJKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWTtcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9QRU5BSV9BUElfS0VZIGluIGVudmlyb25tZW50Jyk7XG4gICAgfVxuICBcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1vZGVsOiAnZ3B0LTRvJyxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicgfSxcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH0sXG4gICAgICAgIF0sXG4gICAgICB9KSxcbiAgICB9KTtcbiAgXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIGNvbnN0IGVyciA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgT3BlbkFJIEFQSSBlcnJvcjonLCBlcnIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUkgcmVxdWVzdCBmYWlsZWQnKTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IHsgY2hvaWNlcyB9ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4gY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudD8udHJpbSgpIHx8ICcnO1xuICB9XG4gICJdLCJuYW1lcyI6WyJjYWxsT3BlbkFJIiwicHJvbXB0IiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiRXJyb3IiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJvayIsImVyciIsImpzb24iLCJjb25zb2xlIiwiZXJyb3IiLCJjaG9pY2VzIiwibWVzc2FnZSIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/openai.ts\n");

/***/ }),

/***/ "(api)/./pages/api/analyze.ts":
/*!******************************!*\
  !*** ./pages/api/analyze.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/openai */ \"(api)/./lib/openai.ts\");\n// pages/api/analyze.ts\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", \"POST\");\n        return res.status(405).end(\"Method Not Allowed\");\n    }\n    const { text } = req.body;\n    if (typeof text !== \"string\" || text.trim().length === 0) {\n        return res.status(400).json({\n            error: \"No text provided for analysis.\"\n        });\n    }\n    try {\n        // craft your system + user prompt however you like\n        const prompt = `\nYou are a homeowners insurance policy expert.\nPlease review and explain the following policy text in clear,\nconsumer-friendly language:\n\n${text}\n    `.trim();\n        const analysis = await (0,_lib_openai__WEBPACK_IMPORTED_MODULE_0__.callOpenAI)(prompt);\n        return res.status(200).json({\n            analysis\n        });\n    } catch (err) {\n        console.error(\"❌ analyze.ts error:\", err);\n        return res.status(500).json({\n            error: \"Analysis failed.\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYW5hbHl6ZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLHVCQUF1QjtBQUV1QjtBQUUvQixlQUFlQyxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QkQsSUFBSUUsU0FBUyxDQUFDLFNBQVM7UUFDdkIsT0FBT0YsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLEdBQUcsQ0FBQztJQUM3QjtJQUVBLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUdOLElBQUlPLElBQUk7SUFDekIsSUFBSSxPQUFPRCxTQUFTLFlBQVlBLEtBQUtFLElBQUksR0FBR0MsTUFBTSxLQUFLLEdBQUc7UUFDeEQsT0FBT1IsSUFBSUcsTUFBTSxDQUFDLEtBQUtNLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWlDO0lBQ3hFO0lBRUEsSUFBSTtRQUNGLG1EQUFtRDtRQUNuRCxNQUFNQyxTQUFTLENBQUM7Ozs7O0FBS3BCLEVBQUVOLEtBQUs7SUFDSCxDQUFDLENBQUNFLElBQUk7UUFFTixNQUFNSyxXQUFXLE1BQU1mLHVEQUFVQSxDQUFDYztRQUNsQyxPQUFPWCxJQUFJRyxNQUFNLENBQUMsS0FBS00sSUFBSSxDQUFDO1lBQUVHO1FBQVM7SUFDekMsRUFBRSxPQUFPQyxLQUFLO1FBQ1pDLFFBQVFKLEtBQUssQ0FBQyx1QkFBdUJHO1FBQ3JDLE9BQU9iLElBQUlHLE1BQU0sQ0FBQyxLQUFLTSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFtQjtJQUMxRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1jb3Zlci8uL3BhZ2VzL2FwaS9hbmFseXplLnRzPzhiMDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2FuYWx5emUudHNcbmltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgY2FsbE9wZW5BSSB9IGZyb20gJy4uLy4uL2xpYi9vcGVuYWknO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsICdQT1NUJyk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoJ01ldGhvZCBOb3QgQWxsb3dlZCcpO1xuICB9XG5cbiAgY29uc3QgeyB0ZXh0IH0gPSByZXEuYm9keTtcbiAgaWYgKHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJyB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIHRleHQgcHJvdmlkZWQgZm9yIGFuYWx5c2lzLicgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIGNyYWZ0IHlvdXIgc3lzdGVtICsgdXNlciBwcm9tcHQgaG93ZXZlciB5b3UgbGlrZVxuICAgIGNvbnN0IHByb21wdCA9IGBcbllvdSBhcmUgYSBob21lb3duZXJzIGluc3VyYW5jZSBwb2xpY3kgZXhwZXJ0LlxuUGxlYXNlIHJldmlldyBhbmQgZXhwbGFpbiB0aGUgZm9sbG93aW5nIHBvbGljeSB0ZXh0IGluIGNsZWFyLFxuY29uc3VtZXItZnJpZW5kbHkgbGFuZ3VhZ2U6XG5cbiR7dGV4dH1cbiAgICBgLnRyaW0oKTtcblxuICAgIGNvbnN0IGFuYWx5c2lzID0gYXdhaXQgY2FsbE9wZW5BSShwcm9tcHQpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGFuYWx5c2lzIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgYW5hbHl6ZS50cyBlcnJvcjonLCBlcnIpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnQW5hbHlzaXMgZmFpbGVkLicgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjYWxsT3BlbkFJIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInNldEhlYWRlciIsInN0YXR1cyIsImVuZCIsInRleHQiLCJib2R5IiwidHJpbSIsImxlbmd0aCIsImpzb24iLCJlcnJvciIsInByb21wdCIsImFuYWx5c2lzIiwiZXJyIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/analyze.ts"));
module.exports = __webpack_exports__;

})();